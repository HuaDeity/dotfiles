#!/usr/bin/env bash

{{ if eq .chezmoi.os "linux" -}}
export LIBRARY_PATH=$HOME/.local/state/nix/profile/lib:$LIBRARY_PATH
export LD_LIBRARY_PATH=$HOME/.local/state/nix/profile/lib:$LD_LIBRARY_PATH
{{ end -}}

{{ if lookPath "volta" }}
volta install node
{{ range .packages.node.shared -}}
volta install {{ . | quote }}
{{ end -}}
{{ end -}}

{{ if lookPath "uv" }}
uv python install
{{ range .packages.python.shared -}}
uv tool install -U {{ . | quote }}
{{ end -}}
{{ if eq .chezmoi.os "linux" -}}
{{ range .packages.python.linux -}}
uv tool install -U {{ . | quote }}
{{ end -}}
{{ end -}}
{{ end -}}

{{ if lookPath "rbenv" }}
{{ range .packages.ruby.shared -}}
gem install {{ . | quote }}
{{ end -}}
{{ end -}}

{{ if lookPath "tlmgr" }}
{{ if eq .chezmoi.os "darwin" -}}
sudo tlmgr update --self
{{ range .packages.tex.darwin -}}
sudo tlmgr install {{ . | quote }}
{{ end -}}
{{ end -}}
{{ end -}}
